"use strict";(()=>{var e={};e.id=878,e.ids=[878],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5004:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>b});var o={};r.r(o),r.d(o,{DELETE:()=>p,GET:()=>d,PATCH:()=>c});var n=r(9303),s=r(8716),i=r(670),a=r(7070),l=r(2021),u=r(6852);async function d(e,{params:t}){try{await (0,l.Z)();let e=await u.Z.findOne({blogId:t.blogId}).lean();if(!e)return a.NextResponse.json({success:!1,error:"Blog not found"},{status:404});return a.NextResponse.json({success:!0,data:e})}catch(e){return console.error("Error fetching blog:",e),a.NextResponse.json({success:!1,error:"Failed to fetch blog"},{status:500})}}async function c(e,{params:t}){try{await (0,l.Z)();let r=await e.json(),o=await u.Z.findOneAndUpdate({blogId:t.blogId},{$set:{...r,slug:r.title?r.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):void 0}},{new:!0}).lean();if(!o)return a.NextResponse.json({success:!1,error:"Blog not found"},{status:404});return a.NextResponse.json({success:!0,data:o})}catch(e){return console.error("Error updating blog:",e),a.NextResponse.json({success:!1,error:"Failed to update blog"},{status:500})}}async function p(e,{params:t}){try{if(await (0,l.Z)(),!await u.Z.findOneAndDelete({blogId:t.blogId}).lean())return a.NextResponse.json({success:!1,error:"Blog not found"},{status:404});return a.NextResponse.json({success:!0,message:"Blog deleted successfully"})}catch(e){return console.error("Error deleting blog:",e),a.NextResponse.json({success:!1,error:"Failed to delete blog"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/blogs/route",pathname:"/api/blogs",filename:"route",bundlePath:"app/api/blogs/route"},resolvedPagePath:"C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\api\\blogs\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:b,serverHooks:f}=g,h="/api/blogs/route";function y(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:b})}},2021:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(1185),n=r.n(o);let s=process.env.MONGODB_URI||"mongodb://localhost:27017/villa-shanti";if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let a=async function(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(s,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},6852:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(1185),n=r.n(o);let s=new o.Schema({blogId:{type:String,required:!0,unique:!0,trim:!0},title:{type:String,required:!0,trim:!0,maxlength:200},content:{type:String,required:!0},excerpt:{type:String,required:!0,maxlength:300},author:{type:String,required:!0,trim:!0},category:{type:String,required:!0,enum:["news","events","promotions","lifestyle","food","travel"]},tags:[{type:String,trim:!0}],image:{type:String,required:!0,trim:!0},isPublished:{type:Boolean,default:!1},publishedAt:{type:Date},views:{type:Number,default:0},slug:{type:String,required:!0,unique:!0,trim:!0}},{timestamps:!0});s.index({category:1}),s.index({isPublished:1}),s.index({publishedAt:-1});let i=n().models.Blog||n().model("Blog",s)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(5004));module.exports=o})();