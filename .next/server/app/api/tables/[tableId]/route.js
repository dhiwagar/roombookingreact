"use strict";(()=>{var e={};e.id=100,e.ids=[100],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6328:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>b,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var n={};r.r(n),r.d(n,{DELETE:()=>p,GET:()=>d,PUT:()=>c});var o=r(9303),a=r(8716),s=r(670),i=r(7070),l=r(2021),u=r(1651);async function d(e,{params:t}){try{await (0,l.Z)();let e=await u.Z.findOne({tableId:t.tableId});if(!e)return i.NextResponse.json({success:!1,error:"Table not found"},{status:404});return i.NextResponse.json({success:!0,data:e})}catch(e){return console.error("Error fetching table:",e),i.NextResponse.json({success:!1,error:"Failed to fetch table"},{status:500})}}async function c(e,{params:t}){try{await (0,l.Z)();let r=await e.json(),n=await u.Z.findOneAndUpdate({tableId:t.tableId},r,{new:!0,runValidators:!0});if(!n)return i.NextResponse.json({success:!1,error:"Table not found"},{status:404});return i.NextResponse.json({success:!0,data:n})}catch(e){return console.error("Error updating table:",e),i.NextResponse.json({success:!1,error:"Failed to update table"},{status:500})}}async function p(e,{params:t}){try{if(await (0,l.Z)(),!await u.Z.findOneAndDelete({tableId:t.tableId}))return i.NextResponse.json({success:!1,error:"Table not found"},{status:404});return i.NextResponse.json({success:!0,message:"Table deleted successfully"})}catch(e){return console.error("Error deleting table:",e),i.NextResponse.json({success:!1,error:"Failed to delete table"},{status:500})}}let b=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/tables/[tableId]/route",pathname:"/api/tables/[tableId]",filename:"route",bundlePath:"app/api/tables/[tableId]/route"},resolvedPagePath:"C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\api\\tables\\[tableId]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:g}=b,x="/api/tables/[tableId]/route";function h(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},2021:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(1185),o=r.n(n);let a=process.env.MONGODB_URI||"mongodb://localhost:27017/villa-shanti";if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let s=global.mongoose;s||(s=global.mongoose={conn:null,promise:null});let i=async function(){if(s.conn)return s.conn;s.promise||(s.promise=o().connect(a,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},1651:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1185),o=r.n(n);let a=new n.Schema({tableId:{type:String,required:!0,unique:!0,trim:!0},name:{type:String,required:!0,trim:!0},capacity:{type:Number,required:!0,min:1,max:20},location:{type:String,required:!0,enum:["indoor","outdoor","private","bar"]},isAvailable:{type:Boolean,default:!0},price:{type:Number,required:!0,min:0},description:{type:String,trim:!0,maxlength:500},image:{type:String,trim:!0}},{timestamps:!0});a.index({location:1}),a.index({isAvailable:1});let s=o().models.Table||o().model("Table",a)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(6328));module.exports=n})();