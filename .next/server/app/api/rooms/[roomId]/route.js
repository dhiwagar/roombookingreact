"use strict";(()=>{var e={};e.id=357,e.ids=[357],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},163:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var t={};o.r(t),o.d(t,{DELETE:()=>c,GET:()=>d,PUT:()=>p});var n=o(9303),s=o(8716),i=o(670),a=o(7070),u=o(2021),m=o(3748);async function d(e,{params:r}){try{await (0,u.Z)();let e=await m.Z.findOne({roomId:r.roomId});if(!e)return a.NextResponse.json({success:!1,error:"Room not found"},{status:404});return a.NextResponse.json({success:!0,data:e})}catch(e){return console.error("Error fetching room:",e),a.NextResponse.json({success:!1,error:"Failed to fetch room"},{status:500})}}async function p(e,{params:r}){try{await (0,u.Z)();let o=await e.json(),t=await m.Z.findOneAndUpdate({roomId:r.roomId},o,{new:!0,runValidators:!0});if(!t)return a.NextResponse.json({success:!1,error:"Room not found"},{status:404});return a.NextResponse.json({success:!0,data:t})}catch(e){return console.error("Error updating room:",e),a.NextResponse.json({success:!1,error:"Failed to update room"},{status:500})}}async function c(e,{params:r}){try{if(await (0,u.Z)(),!await m.Z.findOneAndDelete({roomId:r.roomId}))return a.NextResponse.json({success:!1,error:"Room not found"},{status:404});return a.NextResponse.json({success:!0,message:"Room deleted successfully"})}catch(e){return console.error("Error deleting room:",e),a.NextResponse.json({success:!1,error:"Failed to delete room"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/rooms/[roomId]/route",pathname:"/api/rooms/[roomId]",filename:"route",bundlePath:"app/api/rooms/[roomId]/route"},resolvedPagePath:"C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\api\\rooms\\[roomId]\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:x}=l,y="/api/rooms/[roomId]/route";function h(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}},2021:(e,r,o)=>{o.d(r,{Z:()=>a});var t=o(1185),n=o.n(t);let s=process.env.MONGODB_URI||"mongodb://localhost:27017/villa-shanti";if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let a=async function(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(s,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},3748:(e,r,o)=>{o.d(r,{Z:()=>i});var t=o(1185),n=o.n(t);let s=new t.Schema({roomId:{type:String,required:!0,unique:!0,trim:!0},name:{type:String,required:!0,trim:!0},type:{type:String,required:!0,enum:["deluxe","suite","premium","standard"]},price:{type:Number,required:!0,min:0},maxGuests:{type:Number,required:!0,min:1,max:10},size:{type:String,required:!0},amenities:[{type:String,trim:!0}],images:[{type:String,trim:!0}],description:{type:String,required:!0,trim:!0},features:[{type:String,trim:!0}],isAvailable:{type:Boolean,default:!0},rating:{type:Number,min:0,max:5,default:4.5}},{timestamps:!0});s.index({type:1}),s.index({price:1}),s.index({isAvailable:1});let i=n().models.Room||n().model("Room",s)}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[276,972],()=>o(163));module.exports=t})();