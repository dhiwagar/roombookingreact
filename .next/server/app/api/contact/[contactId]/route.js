"use strict";(()=>{var e={};e.id=666,e.ids=[666],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9227:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>x,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var o={};n.r(o),n.d(o,{DELETE:()=>p,GET:()=>d,PUT:()=>l});var r=n(9303),s=n(8716),a=n(670),c=n(7070),i=n(2021),u=n(6827);async function d(e,{params:t}){try{await (0,i.Z)();let e=await u.Z.findById(t.contactId);if(!e)return c.NextResponse.json({success:!1,error:"Contact not found"},{status:404});return c.NextResponse.json({success:!0,data:e})}catch(e){return console.error("Error fetching contact:",e),c.NextResponse.json({success:!1,error:"Failed to fetch contact"},{status:500})}}async function l(e,{params:t}){try{await (0,i.Z)();let{status:n}=await e.json(),o={};n&&(o.status=n);let r=await u.Z.findByIdAndUpdate(t.contactId,o,{new:!0,runValidators:!0});if(!r)return c.NextResponse.json({success:!1,error:"Contact not found"},{status:404});return c.NextResponse.json({success:!0,data:r})}catch(e){return console.error("Error updating contact:",e),c.NextResponse.json({success:!1,error:"Failed to update contact"},{status:500})}}async function p(e,{params:t}){try{if(await (0,i.Z)(),!await u.Z.findByIdAndDelete(t.contactId))return c.NextResponse.json({success:!1,error:"Contact not found"},{status:404});return c.NextResponse.json({success:!0,message:"Contact deleted successfully"})}catch(e){return console.error("Error deleting contact:",e),c.NextResponse.json({success:!1,error:"Failed to delete contact"},{status:500})}}let m=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/contact/[contactId]/route",pathname:"/api/contact/[contactId]",filename:"route",bundlePath:"app/api/contact/[contactId]/route"},resolvedPagePath:"C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\api\\contact\\[contactId]\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:h}=m,x="/api/contact/[contactId]/route";function w(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},2021:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(1185),r=n.n(o);let s=process.env.MONGODB_URI||"mongodb://localhost:27017/villa-shanti";if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose;a||(a=global.mongoose={conn:null,promise:null});let c=async function(){if(a.conn)return a.conn;a.promise||(a.promise=r().connect(s,{bufferCommands:!1}).then(e=>e));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}},6827:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(1185),r=n.n(o);let s=new o.Schema({name:{type:String,required:!0,trim:!0,maxlength:100},email:{type:String,required:!0,trim:!0,lowercase:!0,match:[/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,"Please enter a valid email"]},subject:{type:String,required:!0,trim:!0,maxlength:200},message:{type:String,required:!0,trim:!0,maxlength:2e3},status:{type:String,enum:["new","read","replied"],default:"new"}},{timestamps:!0});s.index({email:1}),s.index({status:1}),s.index({createdAt:-1});let a=r().models.Contact||r().model("Contact",s)}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),o=t.X(0,[276,972],()=>n(9227));module.exports=o})();