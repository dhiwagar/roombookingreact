(()=>{var e={};e.id=886,e.ids=[886],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5570:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(7991),a(3466),a(5866);var t=a(3191),r=a(8716),l=a(7922),i=a.n(l),n=a(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(s,o);let d=["",{children:["book",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7991)),"C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\book\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3466)),"C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\kepre\\Downloads\\room-booking\\room-booking\\app\\book\\page.tsx"],m="/book/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/book/page",pathname:"/book",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2482:(e,s,a)=>{Promise.resolve().then(a.bind(a,9987))},9987:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(326),r=a(7577),l=a(5047),i=a(9635),n=a(5932),o=a(2887),d=a(2881);let c=(0,d.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var m=a(7358),x=a(4061);let u=(0,d.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var p=a(772),h=a(2643),f=a(4432),g=a(5842),j=a(7673),y=a(4474),b=a(2293),N=a(5999);function v({roomId:e,roomName:s,roomPrice:a,onSuccess:l}){let[d,v]=(0,r.useState)({name:"",email:"",phone:"",roomId:e||"",checkInDate:"",checkOutDate:"",numberOfGuests:2,specialRequest:""}),[k,w]=(0,r.useState)(!1),[I,D]=(0,r.useState)([]),[_,C]=(0,r.useState)(!1),[S,R]=(0,r.useState)(null),{t:O}=(0,b.Z)(),q=async s=>{s.preventDefault(),w(!0);try{let s=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),a=await s.json();a.success?(N.Am.success("Booking created successfully! Check your email for confirmation."),v({name:"",email:"",phone:"",roomId:e||"",checkInDate:"",checkOutDate:"",numberOfGuests:2,specialRequest:""}),l?.(a.data)):N.Am.error(a.error||"Failed to create booking")}catch(e){console.error("Booking error:",e),N.Am.error("An error occurred while creating the booking")}finally{w(!1)}},Z=(e,s)=>{v(a=>({...a,[e]:s})),"roomId"===e&&R(I.find(e=>e.roomId===s)||null)},P=()=>{if(d.checkInDate&&d.checkOutDate){let e=new Date(d.checkInDate),s=Math.ceil((new Date(d.checkOutDate).getTime()-e.getTime())/864e5);return s>0?s:0}return 0},G=S?.price||a||0,M=G*P();return(0,t.jsxs)(h.Zb,{className:"w-full max-w-2xl mx-auto",children:[(0,t.jsxs)(h.Ol,{children:[t.jsx(h.ll,{className:"text-2xl gradient-text",children:s?`Book ${s}`:"Book Your Stay"}),G>0&&(0,t.jsxs)("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:["$",G," per night"]})]}),t.jsx(h.aY,{children:(0,t.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"name",className:"flex items-center gap-2",children:[t.jsx(i.Z,{className:"w-4 h-4"}),O("name")," *"]}),t.jsx(f.I,{id:"name",value:d.name,onChange:e=>Z("name",e.target.value),required:!0,placeholder:"Your full name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"email",className:"flex items-center gap-2",children:[t.jsx(n.Z,{className:"w-4 h-4"}),O("email")," *"]}),t.jsx(f.I,{id:"email",type:"email",value:d.email,onChange:e=>Z("email",e.target.value),required:!0,placeholder:"your.email@example.com"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"phone",className:"flex items-center gap-2",children:[t.jsx(o.Z,{className:"w-4 h-4"}),O("phone")," *"]}),t.jsx(f.I,{id:"phone",type:"tel",value:d.phone,onChange:e=>Z("phone",e.target.value),required:!0,placeholder:"+1234567890"})]}),!e&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(g._,{htmlFor:"roomId",children:"Room *"}),(0,t.jsxs)(y.Ph,{value:d.roomId,onValueChange:e=>Z("roomId",e),children:[t.jsx(y.i4,{children:t.jsx(y.ki,{placeholder:_?"Loading rooms...":"Select a room"})}),t.jsx(y.Bw,{children:_?(0,t.jsxs)("div",{className:"flex items-center justify-center p-4",children:[t.jsx(c,{className:"w-4 h-4 animate-spin mr-2"}),"Loading rooms..."]}):I.map(e=>(0,t.jsxs)(y.Ql,{value:e.roomId,children:[e.name," - $",e.price,"/night (Max: ",e.maxGuests," guests)"]},e.roomId))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"checkInDate",className:"flex items-center gap-2",children:[t.jsx(m.Z,{className:"w-4 h-4"}),O("checkIn")," *"]}),t.jsx(f.I,{id:"checkInDate",type:"date",value:d.checkInDate,onChange:e=>Z("checkInDate",e.target.value),required:!0,min:new Date().toISOString().split("T")[0]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"checkOutDate",className:"flex items-center gap-2",children:[t.jsx(m.Z,{className:"w-4 h-4"}),O("checkOut")," *"]}),t.jsx(f.I,{id:"checkOutDate",type:"date",value:d.checkOutDate,onChange:e=>Z("checkOutDate",e.target.value),required:!0,min:d.checkInDate||new Date().toISOString().split("T")[0]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"numberOfGuests",className:"flex items-center gap-2",children:[t.jsx(x.Z,{className:"w-4 h-4"}),O("guests")," *"]}),(0,t.jsxs)(y.Ph,{value:d.numberOfGuests.toString(),onValueChange:e=>Z("numberOfGuests",parseInt(e)),children:[t.jsx(y.i4,{children:t.jsx(y.ki,{})}),t.jsx(y.Bw,{children:Array.from({length:S?.maxGuests||6},(e,s)=>s+1).map(e=>(0,t.jsxs)(y.Ql,{value:e.toString(),children:[e," ",1===e?"Guest":"Guests"]},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g._,{htmlFor:"specialRequest",className:"flex items-center gap-2",children:[t.jsx(u,{className:"w-4 h-4"}),"Special Requests"]}),t.jsx(j.g,{id:"specialRequest",value:d.specialRequest,onChange:e=>Z("specialRequest",e.target.value),placeholder:"Any special requests or requirements...",rows:3})]}),d.checkInDate&&d.checkOutDate&&G>0&&(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Booking Summary"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Room:"}),t.jsx("span",{children:S?.name||s})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Nights:"}),t.jsx("span",{children:P()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Rate per night:"}),(0,t.jsxs)("span",{children:["$",G]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Guests:"}),t.jsx("span",{children:d.numberOfGuests})]}),t.jsx("div",{className:"border-t pt-2 mt-2",children:(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[t.jsx("span",{children:"Total Amount:"}),(0,t.jsxs)("span",{className:"text-coral-500",children:["$",M]})]})})]})]}),t.jsx(p.z,{type:"submit",className:"btn-primary w-full",disabled:k||!d.roomId,children:k?(0,t.jsxs)(t.Fragment,{children:[t.jsx(c,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Booking..."]}):"Book Now"})]})})]})}function k(){return t.jsx(r.Suspense,{fallback:t.jsx("div",{className:"pt-20 min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-4xl font-bold mb-4 gradient-text",children:"Book Your Stay"}),t.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Complete your reservation at Villa Shanti"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-coral-500 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})]})}),children:t.jsx(w,{})})}function w(){let e=(0,l.useSearchParams)(),[s,a]=(0,r.useState)(null),[i,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),{t:c}=(0,b.Z)();return(o&&e.get("roomId"),o)?t.jsx("div",{className:"pt-20 min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-4xl font-bold mb-4 gradient-text",children:c("book")}),t.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Complete your reservation at Villa Shanti"})]}),i?(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-coral-500 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading room details..."})]}):t.jsx(v,{roomId:s?.roomId,roomName:s?.name,roomPrice:s?.price,onSuccess:e=>{console.log("Booking successful:",e)}})]})}):null}},2643:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,Zb:()=>i,aY:()=>d,eW:()=>c,ll:()=>o});var t=a(326),r=a(7577),l=a(7863);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle",r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));c.displayName="CardFooter"},4432:(e,s,a)=>{"use strict";a.d(s,{I:()=>i});var t=a(326),r=a(7577),l=a(7863);let i=r.forwardRef(({className:e,type:s,...a},r)=>t.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},5842:(e,s,a)=>{"use strict";a.d(s,{_:()=>c});var t=a(326),r=a(7577),l=a(5226),i=r.forwardRef((e,s)=>(0,t.jsx)(l.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=a(9360),o=a(7863);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...s},a)=>t.jsx(i,{ref:a,className:(0,o.cn)(d(),e),...s}));c.displayName=i.displayName},4474:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>h,Ph:()=>c,Ql:()=>f,i4:()=>x,ki:()=>m});var t=a(326),r=a(7577),l=a(8785),i=a(8393),n=a(6633),o=a(2933),d=a(7863);let c=l.fC;l.ZA;let m=l.B4,x=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,t.jsx(l.JO,{asChild:!0,children:t.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=l.xz.displayName;let u=r.forwardRef(({className:e,...s},a)=>t.jsx(l.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(n.Z,{className:"h-4 w-4"})}));u.displayName=l.u_.displayName;let p=r.forwardRef(({className:e,...s},a)=>t.jsx(l.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(i.Z,{className:"h-4 w-4"})}));p.displayName=l.$G.displayName;let h=r.forwardRef(({className:e,children:s,position:a="popper",...r},i)=>t.jsx(l.h_,{children:(0,t.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[t.jsx(u,{}),t.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(p,{})]})}));h.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let f=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(o.Z,{className:"h-4 w-4"})})}),t.jsx(l.eT,{children:s})]}));f.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},7673:(e,s,a)=>{"use strict";a.d(s,{g:()=>i});var t=a(326),r=a(7577),l=a(7863);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Textarea"},9635:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4061:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7991:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`C:\Users\kepre\Downloads\room-booking\room-booking\app\book\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,667,786,346],()=>a(5570));module.exports=t})();